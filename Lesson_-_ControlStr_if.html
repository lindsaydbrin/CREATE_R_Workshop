<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />




<title>Control structures 1: if and if...else</title>

<script src="libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="libs/bootstrap-3.3.5/css/cerulean.min.css" rel="stylesheet" />
<script src="libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/respond.min.js"></script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; background-color: #f8f8f8; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
pre, code { background-color: #f8f8f8; }
code > span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code > span.dt { color: #204a87; } /* DataType */
code > span.dv { color: #0000cf; } /* DecVal */
code > span.bn { color: #0000cf; } /* BaseN */
code > span.fl { color: #0000cf; } /* Float */
code > span.ch { color: #4e9a06; } /* Char */
code > span.st { color: #4e9a06; } /* String */
code > span.co { color: #8f5902; font-style: italic; } /* Comment */
code > span.ot { color: #8f5902; } /* Other */
code > span.al { color: #ef2929; } /* Alert */
code > span.fu { color: #000000; } /* Function */
code > span.er { color: #a40000; font-weight: bold; } /* Error */
code > span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #000000; } /* Constant */
code > span.sc { color: #000000; } /* SpecialChar */
code > span.vs { color: #4e9a06; } /* VerbatimString */
code > span.ss { color: #4e9a06; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #000000; } /* Variable */
code > span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code > span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code > span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code > span.ex { } /* Extension */
code > span.at { color: #c4a000; } /* Attribute */
code > span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code > span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>


</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>



<div class="container-fluid main-container">

<!-- tabsets -->
<script src="libs/navigation-1.1/tabsets.js"></script>
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->






<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Control structures 1: <code>if</code> and <code>if...else</code></h1>

</div>


<hr />
<ul>
<li><a href="#motivation">What, and why?</a><br />
</li>
<li><a href="#ififelse"><code>if</code> and <code>if...else</code></a>
<ul>
<li><a href="#if"><code>if</code></a></li>
<li><a href="#ifelse"><code>if...else</code></a></li>
<li><em><a href="#challengeifelse">Challenge</a></em></li>
</ul></li>
</ul>
<hr />
<div id="motivation" class="section level1">
<h1>Why, and what?</h1>
<p>Control structures allow us to alter the flow of a program, and to make decisions about when or how many times an action occurs. These tools can help you automate processes that require decision-making or repeated actions.</p>
<p>In the next two lessons, we will introduce you to two of them: if…else statements and for loops.</p>
</div>
<div id="if-and-if...else" class="section level1">
<h1><code>if</code> and <code id="ififelse">if...else</code></h1>
<div id="if" class="section level2">
<h2><code id="if">if</code></h2>
<p><em>if</em> statements test whether a condition is true, and then execute a piece of code if so. This can be diagrammed as follows:</p>
<p><img src="Images/CtrlStr_if/unnamed-chunk-2-1.png" width="500pt" style="display: block; margin: auto;" /></p>
<p>In R, an <code>if</code> statement looks like the following:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">if (test condition is true) { 
  run this line of code
  }</code></pre></div>
<p>Note that the conditional test is in parentheses, and the action to be executed is in curly braces <code>{ }</code>. It is not necessary to put the body of the if statement on a separate line, but this helps your code to be more readable. The same is true for the indentation - it is there to help you read your code more easily.</p>
<p>As an example, we can write an if statement to act based on whether a number is positive.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">a &lt;-<span class="st"> </span><span class="dv">4</span>  <span class="co"># Set value for a</span>
if (a &gt;<span class="st"> </span><span class="dv">0</span>) {
  <span class="kw">print</span>(<span class="st">&quot;positive&quot;</span>)
}</code></pre></div>
<pre><code>## [1] &quot;positive&quot;</code></pre>
<p>But what if the number is negative? Try this out for yourself.</p>
<p>With <code>a</code> set to a negative value, nothing was printed. Let’s change the statement so that “negative” is printed if the condition is not true. Here’s where the <code>else</code> part comes in.</p>
</div>
<div id="if...else" class="section level2">
<h2><code id="ifelse">if...else</code></h2>
<p>An <strong>if…else</strong> statement controls flow in this way:</p>
<p><img src="Images/CtrlStr_if/unnamed-chunk-5-1.png" width="500pt" style="display: block; margin: auto;" /></p>
<p>To accomplish this, the code will look like this:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">if (test condition is true) { 
  run this line of code
  } else {
    run this other line of code instead
  }</code></pre></div>
<p>Note that the <code>else</code> has to be on the same line as the closing bracket of the <code>if</code> statement.</p>
<p>Building onto the earlier example, we can add the <code>else</code> part to have the function print “negative” if the value is not above 0. We’ll set the value of <code>a</code> to a negative number to demonstrate the flow:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">a &lt;-<span class="st"> </span>-<span class="dv">3</span>
if (a &gt;<span class="st"> </span><span class="dv">0</span>) {
  <span class="kw">print</span>(<span class="st">&quot;positive&quot;</span>)
} else {
  <span class="kw">print</span>(<span class="st">&quot;negative&quot;</span>)
}</code></pre></div>
<pre><code>## [1] &quot;negative&quot;</code></pre>
<p>Great, our statement works! But what if the value of <code>a</code> is 0? Try this out for yourself.</p>
<p>In this case, our assessment is incorrect. We can add a second test condition to the statement using <code>else if</code>, which effectively nests one if…else inside the other.</p>
<p>The R code will be structured like this:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">if (test condition is true) { 
  run this line of code
  } else if {
    run this other line of code instead
  } else {
    run this line of code when none of the previous conditions are true
  }</code></pre></div>
<p>As an example, with <code>a</code> now equal to 0, and specifying all expected conditions (with the last <code>else</code> as a silly warning):</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">a &lt;-<span class="st"> </span><span class="dv">0</span>
if (a &gt;<span class="st"> </span><span class="dv">0</span>) {
  <span class="kw">print</span>(<span class="st">&quot;positive&quot;</span>)
} else if (a &lt;<span class="st"> </span><span class="dv">0</span>) {
  <span class="kw">print</span>(<span class="st">&quot;negative&quot;</span>)
} else if (a ==<span class="st"> </span><span class="dv">0</span>) {
  <span class="kw">print</span>(<span class="st">&quot;zero&quot;</span>)
} else {
  <span class="kw">print</span>(<span class="st">&quot;Houston, we have a problem.&quot;</span>)
}</code></pre></div>
<pre><code>## [1] &quot;zero&quot;</code></pre>
<p>Try changing the value of <code>a</code> and re-running the <code>if...else</code> statement to see for yourself how it works.</p>
<p>Is it possible to get to the last <code>else</code> statement? How, or why not?</p>
<p>There is another way to write an if…else statement, and that is with the <code>ifelse</code> function. This function has 3 arguments: the <code>test</code> case; <code>yes</code>, or what to do if the test case is true; and <code>no</code>, or what to do if the test case is false. Let’s use this function to test whether a number is even. We can do that using <code>%%</code>, which gives the remainder after division.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">a &lt;-<span class="st"> </span><span class="dv">43</span>
a %%<span class="st"> </span><span class="dv">2</span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ifelse</span>(<span class="dt">test =</span> a %%<span class="st"> </span><span class="dv">2</span> ==<span class="st"> </span><span class="dv">0</span>, <span class="dt">yes =</span> <span class="st">&quot;even&quot;</span>, <span class="dt">no =</span> <span class="st">&quot;odd&quot;</span>)</code></pre></div>
<pre><code>## [1] &quot;odd&quot;</code></pre>
<p>Here, if the remainder after division by two is equal to 0, the test case is true, and “even” is printed. Otherwise, if the test case is false, “odd” is printed. With <code>a</code> equal to 43, the remainder was 1, and therefore “odd” was printed. Try a few values of <code>a</code> for yourself to see how this works.</p>
<p>Let’s work with the <code>nutrients</code> data (from <code>Experiment_nutrients.csv</code>) to demonstrate when this could be helpful. As a reminder, here is the data frame:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">nutrients</code></pre></div>
<pre><code>##   Treatment Replicate Ammonium Nitrate Nitrite
## 1         1         1      8.2     1.7     0.4
## 2         1         2      6.9     3.6     1.5
## 3         1         3     12.1     2.8     0.8
## 4         2         1     10.5     0.4     0.7
## 5         2         2      8.6     2.7     1.2
## 6         2         3      7.8     4.1     0.9</code></pre>
<p>The instruments and methods that are used to measure nutrient concentrations often have detection limits, and values below this limit cannot be distinguished from 0. For this reason, one might choose to set these values equal to 0 or to <code>NA</code>. Let’s say the detection limit for nitrite is 0.5 ppm. Rather than manually checking which values are less than or equal to 0.5, and then changing those values using subsetting, we can use an <code>ifelse</code> statement within <code>mutate</code> to do this for us. We’ll add the “corrected” data as a new variable.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">nutrients &lt;-<span class="st"> </span>nutrients %&gt;%
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Nitrite_corr=</span><span class="kw">ifelse</span>(Nitrite&lt;=<span class="fl">0.5</span>, <span class="ot">NA</span>, Nitrite))

nutrients</code></pre></div>
<pre><code>##   Treatment Replicate Ammonium Nitrate Nitrite Nitrite_corr
## 1         1         1      8.2     1.7     0.4           NA
## 2         1         2      6.9     3.6     1.5          1.5
## 3         1         3     12.1     2.8     0.8          0.8
## 4         2         1     10.5     0.4     0.7          0.7
## 5         2         2      8.6     2.7     1.2          1.2
## 6         2         3      7.8     4.1     0.9          0.9</code></pre>
<div id="challengeifelse" class="section level4">
<h4>Challenge</h4>
<ol style="list-style-type: decimal">
<li><p>Write an if statement that takes a person’s age (numeric element) as input and returns a statement about whether or not the person is old enough to vote.</p></li>
<li><p>Write an if statement that takes a name (character element) as input and returns a statement about whether or not the name is the same as yours.</p></li>
<li><p>Add a variable, <code>Abundance</code>, to the <code>trees</code> data frame that is equal to <code>&quot;High&quot;</code> if the species was counted at least 10 times, and <code>&quot;Low&quot;</code> otherwise.</p></li>
<li><p>Add a variable, <code>Period</code>, to the <code>Fundybirds</code> data frame that indicates whether each bird was counted in the morning or the afternoon.</p></li>
</ol>
</div>
<div id="bonus-challenge" class="section level4">
<h4>Bonus challenge</h4>
<ol start="5" style="list-style-type: decimal">
<li><p>Write an if statement that returns a message if any values of <code>Nitrate</code> in <code>nutrients</code> are less than 2. <em>(Give this a try before scrolling down!)</em><br />
..<br> ..<br> ..<br> ..<br> ..<br> ..<br> ..<br> ..<br> ..<br> ..<br> ..<br> ..<br> ..<br> ..<br> ..<br> ..<br> ..<br> ..<br> ..<br> ..<br> ..<br> ..<br> ..<br> ..<br> ..<br> ..<br> ..<br> ..<br> ..<br> ..<br> ..<br> ..<br> ..<br> ..<br> ..<br> ..<br> ..<br> …did you get the error message below?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">if (nutrients$Nitrate &lt;<span class="st"> </span><span class="dv">2</span>) { <span class="kw">print</span>(<span class="st">&quot;Less than two!&quot;</span>) }</code></pre></div>
<pre><code>## Warning in if (nutrients$Nitrate &lt; 2) {: the condition has length &gt; 1 and
## only the first element will be used</code></pre>
<pre><code>## [1] &quot;Less than two!&quot;</code></pre>
<p>What happened here?</p>
<p>The if statement can only accept a single element, so if you try to use a vector with multiple elements, it will only act on the first one. We can use the function <code>any</code> to assess whether any elements of a vector are <code>TRUE</code> and return only a single <code>TRUE</code> or <code>FALSE</code> value. Similarly, we can use the function <code>all</code> to assess whether all elements of the vector are <code>TRUE</code>.</p>
<p>For example:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">any</span>(nutrients$Nitrate &lt;<span class="st"> </span><span class="dv">2</span>)</code></pre></div>
<pre><code>## [1] TRUE</code></pre></li>
</ol>
</div>
<div id="bonus-challenge-redux" class="section level4">
<h4>Bonus challenge redux</h4>
<ol start="5" style="list-style-type: decimal">
<li>Try the above challenge again, using the <code>any</code> function.</li>
</ol>
<br>
<hr>
<p><br></p>
</div>
</div>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
